apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "edusharing_repository_search_solr4.fullname" . }}-env
  labels: {{ include "edusharing_repository_search_solr4.labels" . | nindent 4 }}
data:
  CATALINA_OPTS: >-
    -XX:MinRAMPercentage={{ .Values.config.jvm.ram.minPercentage }}
    -XX:MaxRAMPercentage={{ .Values.config.jvm.ram.maxPercentage }}
  REPOSITORY_SEARCH_SOLR4_BIND: {{ if .Values.global.istio.enabled }}"127.0.0.1"{{ else }}"0.0.0.0"{{ end }}
  REPOSITORY_SEARCH_SOLR4_HOST: {{ include "edusharing_repository_search_solr4.fullname" . | quote }}
  REPOSITORY_SEARCH_SOLR4_PORT: {{ .Values.service.port.api | quote }}
  REPOSITORY_SERVICE_HOST: {{ include "edusharing_repository_search_solr4.edusharing_repository_service" . | quote }}
  REPOSITORY_SERVICE_PORT: {{ .Values.edusharing_repository_service.service.port.api.internal | quote }}
